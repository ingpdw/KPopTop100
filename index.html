
<!DOCTYPE html>
<html id="mobile" lang="ko">
<head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=Edge" />
	<meta name="viewport" content="user-scalable=no, maximum-scale=1.0, minimum-scale=1.0, width=device-width, initial-scale=1.0" />
	<meta name="autocomplete" content="off" />
	<meta name="format-detection" content="telephone=no" />
	<meta name="apple-mobile-web-app-capable" content="no" />
	<meta name="apple-touch-fullscreen" content="YES" />
	<meta name="keyword" content="kpop" />
	<title>K-pop Top100</title>
	<style>
		body,div,dl,dt,dd,ul,ol,li,h1,h2,h3,h4,h5,h6,pre,code,form,fieldset,legend,textarea,p,blockquote,th,td,input,select,textarea,button {margin:0;padding:0}
		dl,ul,ol,menu,li {list-style:none}
		body {font-size:12px;line-height:1.5;font-family:'돋움',dotum,sans-serif;color:#333}
		a {color:#333;text-decoration:none}
		a:hover {color:#000;text-decoration:underline}
		a:active {background-color:transparent}

		.wrap{ margin: 10px;}
	</style>
</head>
<body>
	<div class="wrap">
		<div id="player"></div>
		<div id="songList"></div>
		
	</div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.6/angular.min.js"></script>
<script src="https://www.youtube.com/iframe_api"></script>
<script src="./js/planetxsdk.js"></script>
<script>
var player;
function onYouTubePlayerAPIReady() {

    player = new YT.Player('player', {
      height: '390',
      width: '640',
      videoId: 'M7lc1UVf-VE'
    });
}

(function(){

	'use strict'

	var onPlayerReady = function(){};
	var onPlayerStateChange = function(){};

	var listTmpl = '<li class="song">{{idx}} .<a href="http://www.youtube.com/embed?listType=search&list={{query}}&autoplay=1">'+
		'{{query}}'+
		'</a></li>';

	PlanetX.init({
		appkey : "97ab7564-88ff-3038-8c7f-ad6257ec2684",
		savingToken : true
	});

	PlanetX.api( 'get', 
		'http://apis.skplanetx.com/melon/charts/todaytopsongs', 
		'JSON', { 
			'version' : 1, 
			'page': 1, 
			'count': 100 
	}, function( data ){
		var songs = data.melon.songs.song,
			len = songs.length,
			idx = 0,
			nodes = '';

		for( ;len > idx; idx += 1 ){

			listTmpl.replace( '{{idx}}', idx + 1 ).replace( /{{query}}/g,songs[ idx ].songName );
			nodes += listTmpl.replace( '{{idx}}', idx + 1 ).replace( /{{query}}/g,songs[ idx ].songName );
		};

		jQuery( '#songList' ).append( '<ul>' + nodes  + '</ul>' );

		$( '.song a' ).on( 'click', function( evt ){
			evt.preventDefault();
			player.cueVideoByUrl( $( this ).attr( 'href'), 0, 'default' );
		});

	});
}());
(function(){
	
}());
</script>
</body>
</html>